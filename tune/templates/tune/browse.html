{% extends 'base.html' %}

{% block title %}Tunes{% endblock %}

{% block content %}
<div class="my-4">
    <input class="form-control" type="search" 
    name="search" placeholder="Search tunes..." 
    hx-post="/test" 
    hx-trigger="input changed delay:500ms, search" 
    hx-target="#search-results" 
    hx-indicator=".htmx-indicator">
</div>
<table class="table">
    <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
    </tr>
    </thead>
    <tbody id="search-results">
    </tbody>
</table>

<div class="my-4">
<form method="post" action="{% url 'tune:tune_browse' %}">
    {% csrf_token %}
    <label for="basic_search">Basic search: </label>
    <input id="search_term" type="text" name="search_term">
    <input class="btn btn-primary" type="submit" value="Search">
</div>
</form>
<h1>Tunes</h1>
<div class="tune">
    <table class="table table-success table-striped">
        <tr>
            <thead>
                <th>Title</th>
                <th>Composer</th>
                <th>Key</th>
                <th>Other Keys</th>
                <th>Form</th>
                <th>Style</th>
                <th>Meter</th>
                <th>Year</th>
                <th>Actions</th>
            </thead>
        </tr>
    {% for tune in tunes %}
    <tbody  id="search-results">
    <tr>
        <td>{{ tune.title }}</td>
        <td>{{ tune.composer }}</td>
        <td>{{ tune.key }}</td>
        <td>{{ tune.other_keys }}</td>
        <td>{{ tune.song_form }}</td>
        <td>{{ tune.style }}</td>
        <td>{{ tune.meter }}</td>
        <td>{{ tune.year }}</td>
        <td>
            <form method="post" action="{% url 'tune:tune_take' pk=tune.pk %}">
                {% csrf_token %}
                <input class="btn btn-warning btn-sm" type="submit" value="Take">
            </form>
        </td>
    </tr>
    </tbody>
    {% endfor %}
    </table>
    </div>
{% endblock %}
